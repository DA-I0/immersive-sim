[gd_scene load_steps=13 format=3 uid="uid://dyfc3s38ef0fl"]

[ext_resource type="Script" uid="uid://djygt5j4uhcx4" path="res://code/systems/GameSystem.cs" id="1_04cii"]
[ext_resource type="Script" uid="uid://kq3tcvbk11gy" path="res://code/TimeController.cs" id="2_eyr6m"]
[ext_resource type="PackedScene" uid="uid://b2vudjxvewu0" path="res://ui/system/player_hud.tscn" id="3_c4w5x"]
[ext_resource type="Script" uid="uid://b7iba13kwrwxa" path="res://code/systems/LevelManager.cs" id="5_foie3"]

[sub_resource type="Gradient" id="Gradient_6t6ny"]
offsets = PackedFloat32Array(0, 0.3, 0.7, 1)
colors = PackedColorArray(0.94902, 0.666667, 0.372549, 1, 0.866871, 0.799125, 0.756121, 1, 0.866667, 0.8, 0.756863, 1, 0.94902, 0.666667, 0.372549, 1)

[sub_resource type="Curve" id="Curve_uw7xd"]
_limits = [0.0, 3.0, 0.0, 1.0]
_data = [Vector2(0.15, 0), 0.0, 0.0, 0, 0, Vector2(0.3, 2), 7.8, 7.8, 0, 0, Vector2(0.7, 2), -5.57553, -5.57553, 0, 0, Vector2(0.85, 0), 0.0, 0.0, 0, 0]
point_count = 4

[sub_resource type="Gradient" id="Gradient_ee6wh"]
offsets = PackedFloat32Array(0, 0.5, 1)
colors = PackedColorArray(0.244776, 0.244776, 0.244776, 1, 0.309804, 0.309804, 0.423529, 1, 0.243137, 0.243137, 0.243137, 1)

[sub_resource type="Curve" id="Curve_cl8ha"]
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(0.3, 0), 0.0, 0.0, 0, 0, Vector2(0.7, 0), 0.0, 0.0, 0, 0, Vector2(1, 1), 0.0, 0.0, 0, 0]
point_count = 4

[sub_resource type="Curve" id="Curve_u28o4"]
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(0.5, 0.75), 0.0, 0.0, 0, 0, Vector2(1, 1), 0.0, 0.0, 0, 0]
point_count = 3

[sub_resource type="PhysicalSkyMaterial" id="PhysicalSkyMaterial_7a3gd"]

[sub_resource type="Sky" id="Sky_8rc3v"]
sky_material = SubResource("PhysicalSkyMaterial_7a3gd")
process_mode = 3

[sub_resource type="Environment" id="Environment_vv0ty"]
background_mode = 2
background_energy_multiplier = 2.0
sky = SubResource("Sky_8rc3v")
tonemap_mode = 3
ssao_enabled = true
sdfgi_enabled = true
sdfgi_use_occlusion = true
sdfgi_min_cell_size = 0.1
sdfgi_normal_bias = 0.8
sdfgi_probe_bias = 0.8
glow_enabled = true
glow_normalized = true
glow_bloom = 0.2

[node name="Game" type="Node"]
process_mode = 1

[node name="System" type="Node" parent="."]
process_mode = 3
script = ExtResource("1_04cii")

[node name="WorldTimer" type="Timer" parent="System" node_paths=PackedStringArray("_sun", "_moon")]
autostart = true
script = ExtResource("2_eyr6m")
_sun = NodePath("../../Sun")
_moon = NodePath("../../Moon")
_startingHour = 9
_sunColor = SubResource("Gradient_6t6ny")
_sunIntensity = SubResource("Curve_uw7xd")
_moonColor = SubResource("Gradient_ee6wh")
_moonIntensity = SubResource("Curve_cl8ha")
_shadowStrength = SubResource("Curve_u28o4")

[node name="UI" parent="." instance=ExtResource("3_c4w5x")]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_vv0ty")

[node name="Sun" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, -0.783997, 0.620765, 0, -0.620765, -0.783997, 0, 0, 0)
light_color = Color(1, 0.968627, 0.909804, 1)
light_energy = 2.0
light_angular_distance = 0.5
shadow_enabled = true
shadow_bias = 0.01
shadow_reverse_cull_face = true
shadow_opacity = 0.9
shadow_blur = 0.0
directional_shadow_mode = 1

[node name="Moon" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, -1, 0, 1, -4.37114e-08, 0, 0, 0)
visible = false
shadow_enabled = true
sky_mode = 1

[node name="ActiveLevel" type="Node" parent="."]
process_mode = 3
script = ExtResource("5_foie3")

[connection signal="timeout" from="System/WorldTimer" to="System/WorldTimer" method="UpdateWorldTime"]
